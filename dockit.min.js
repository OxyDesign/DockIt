!function(a){"use strict";var b="dockIt";a[b]=function(c){var d=a(c);return a[b]=function(b,c){var d=this,e={scrollDown:!1,scrollUp:!1,dockToTopFrom:!1,dockToBottomFrom:!1,stopDockFrom:!1,stopDockBefore:!1,marginT:10,marginB:10,dockedClass:"docked",zIndex:"auto",onInit:!1,onStop:!1,onDock:!1,onUndock:!1};return d.opts=a.extend(e,c),!d.opts.scrollDown&&!d.opts.scrollUp&&!d.opts.dockToTopFrom&&!d.opts.dockToBottomFrom&&(d.opts.scrollDown=!0),d.touch="ontouchstart"in document.documentElement,d.stElt=a(b),d.stEltClone=d.stElt.clone().css("visibility","hidden").hide(),d.initialConfig={position:d.stElt.css("position"),top:d.stElt.css("top"),right:d.stElt.css("right"),bottom:d.stElt.css("bottom"),left:d.stElt.css("left"),margin:d.stElt.css("margin"),"z-index":d.stElt.css("z-index")},d.timeWindow=10,d.lastExecutionResize=new Date((new Date).getTime()-d.timeWindow),d.lastExecutionScroll=new Date((new Date).getTime()-d.timeWindow),d.initDock()},a[b].prototype={initDock:function(){var a=this;a.stElt.data("dockAlive")||(a.onResizeContext=function(){a.onResize()},a.onScrollContext=function(){a.onScroll()},a.setDC(),a.windowHeight=d.height(),a.stElt.data("dockAlive",!0),a.stElt.after(a.stEltClone),a.onScroll(),d.on({resize:a.onResizeContext,scroll:a.onScrollContext}),a.touch&&d.on("touchmove",a.onScrollContext),"function"==typeof a.opts.onInit&&a.opts.onInit())},stopDock:function(){var a=this;a.stElt.data("dockAlive")&&(a.stElt.data("dockAlive",!1).removeClass(a.opts.dockedClass),a.stEltClone.remove(),a.dockCss(),d.off({resize:a.onResizeContext,scroll:a.onScrollContext}),a.touch&&d.off("touchmove",a.onScrollContext),"function"==typeof a.opts.onStop&&a.opts.onStop())},dockCss:function(a){var b=this,c="scrollDown"===a;a?(b.stElt.css({position:"fixed",left:b.dynamicConfig.stEltL,right:"auto",top:c?b.opts.marginT:"auto",bottom:c?"auto":b.opts.marginB,margin:0,"z-index":b.opts.zIndex}).addClass(b.opts.dockedClass),b.stEltClone.show(),"function"==typeof b.opts.onUndock&&b.opts.onUndock()):(b.stElt.css(b.initialConfig).removeClass(b.opts.dockedClass),b.stEltClone.hide(),"function"==typeof b.opts.onDock&&b.opts.onDock())},setDC:function(){var a=this;a.dynamicConfig={stEltL:a.stElt.offset().left,stEltT:a.stElt.offset().top,stEltH:a.stElt.height(),stEltW:a.stElt.width(),stEltB:a.stElt.offset().top+a.stElt.height()}},onScroll:function(){var a=this,b=function(){var b=d.scrollTop(),c=a.windowHeight+b;a.opts.stopDockFrom!==!1&&b>=a.opts.stopDockFrom||a.opts.stopDockBefore!==!1&&b<=a.opts.stopDockBefore?a.dockCss():a.opts.dockToTopFrom!==!1&&b>=a.opts.dockToTopFrom||a.opts.scrollDown&&b>a.dynamicConfig.stEltT-a.opts.marginT?a.dockCss("scrollDown"):a.opts.dockToBottomFrom!==!1&&b>=a.opts.dockToBottomFrom||a.opts.scrollUp&&c<a.dynamicConfig.stEltB+a.opts.marginB?a.dockCss("scrollUp"):a.dockCss()};return{bind:function(){return!(a.lastExecutionScroll instanceof Date)||a.lastExecutionScroll.getTime()+a.timeWindow<=(new Date).getTime()?(a.lastExecutionScroll=new Date,b.apply(this,arguments)):void 0}()}},onResize:function(){var a=this,b=function(){a.windowHeight=d.height(),a.dockCss(),a.setDC(),a.onScroll()};return{bind:function(){return a.lastExecutionResize.getTime()+a.timeWindow<=(new Date).getTime()?(a.lastExecutionResize=new Date,a.lastExecutionScroll=!1,b.apply(this,arguments)):void 0}()}}},a[b]}(window),a.fn[b]=function(c){return this.each(function(){if(a(this).data(b)){var d=a(this).data(b);switch(c){case"initDock":d.initDock();break;case"stopDock":d.stopDock();break;default:"object"==typeof c&&d.initDock()}}else a(this).data(b,new a[b](this,c))})}}(window.Zepto||window.jQuery);