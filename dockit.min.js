!function(a){"use strict";var b="dockIt";a[b]=function(c){var d=a(c);return a[b]=function(b,c){var d=this,e={scrollDown:!1,scrollUp:!1,dockToTopFrom:!1,dockToBottomFrom:!1,stopDockFrom:!1,stopDockBefore:!1,marginT:10,marginB:10,dockedClass:"docked",zIndex:"auto",onInit:!1,onStop:!1,onDock:!1,onUndock:!1};return d.opts=a.extend({},e,c),!d.opts.scrollDown&&!d.opts.scrollUp&&!d.opts.dockToTopFrom&&!d.opts.dockToBottomFrom&&(d.opts.scrollDown=!0),d.touch="ontouchstart"in document.documentElement,d.dockElt=a(b),d.dockEltClone=d.dockElt.clone().css("visibility","hidden"),d.timeWindow=10,d.lastExecutionResize=new Date((new Date).getTime()-d.timeWindow),d.lastExecutionScroll=new Date((new Date).getTime()-d.timeWindow),d.initDock()},a[b].prototype={initDock:function(){var a=this;a.dockElt.data(b+"Alive")||(a.onResizeContext=function(){a.onResize()},a.onScrollContext=function(){a.onScroll()},a.dockElt.data(b+"Alive",!0),a.dockElt.after(a.dockEltClone.hide()),a.setConfig(),a.onScroll(),d.on({resize:a.onResizeContext,scroll:a.onScrollContext}),a.touch&&d.on("touchmove",a.onScrollContext),"function"==typeof a.opts.onInit&&a.opts.onInit())},stopDock:function(){var a=this;a.dockElt.data(b+"Alive")&&(d.off({resize:a.onResizeContext,scroll:a.onScrollContext}),a.touch&&d.off("touchmove",a.onScrollContext),a.dockElt.data(b+"Alive",!1).removeClass(a.opts.dockedClass),a.setConfig(),a.dockCss(),a.dockEltClone.remove(),"function"==typeof a.opts.onStop&&a.opts.onStop())},dockCss:function(a){var b=this,c="scrollDown"===a;a?(b.dockElt.css({position:"fixed",top:c?b.opts.marginT:"auto",right:"auto",bottom:c?"auto":b.opts.marginB,left:b.calcConfig.dockEltL,height:b.calcConfig.dockEltH,width:b.calcConfig.dockEltW,margin:0,"z-index":b.opts.zIndex}).addClass(b.opts.dockedClass),b.dockEltClone.show(),"function"==typeof b.opts.onUndock&&b.opts.onUndock()):(b.dockElt.css(b.cssConfig).removeClass(b.opts.dockedClass),b.dockEltClone.hide(),"function"==typeof b.opts.onDock&&b.opts.onDock())},setConfig:function(){var a=this,b="none"===a.dockEltClone.css("display");b&&(a.dockEltClone.show(),a.dockElt.hide()),a.windowHeight=d.height(),a.cssConfig={position:a.dockEltClone.css("position"),top:a.dockEltClone.css("top"),right:a.dockEltClone.css("right"),bottom:a.dockEltClone.css("bottom"),left:a.dockEltClone.css("left"),height:a.dockEltClone.css("height"),width:a.dockEltClone.css("left"),margin:a.dockEltClone.css("margin"),"z-index":a.dockEltClone.css("z-index")},a.calcConfig={dockEltL:a.dockEltClone.offset().left,dockEltT:a.dockEltClone.offset().top,dockEltH:a.dockEltClone.height(),dockEltW:a.dockEltClone.width(),dockEltB:a.dockEltClone.offset().top+a.dockEltClone.height()},b&&(a.dockEltClone.hide(),a.dockElt.show())},onScroll:function(){var a=this,b=function(){var b=d.scrollTop(),c=a.windowHeight+b;a.opts.stopDockFrom!==!1&&b>=a.opts.stopDockFrom||a.opts.stopDockBefore!==!1&&b<=a.opts.stopDockBefore?a.dockCss():a.opts.dockToTopFrom!==!1&&b>=a.opts.dockToTopFrom||a.opts.scrollDown&&b>a.calcConfig.dockEltT-a.opts.marginT?a.dockCss("scrollDown"):a.opts.dockToBottomFrom!==!1&&b>=a.opts.dockToBottomFrom||a.opts.scrollUp&&c<a.calcConfig.dockEltB+a.opts.marginB?a.dockCss("scrollUp"):a.dockCss()};return{bind:function(){return!(a.lastExecutionScroll instanceof Date)||a.lastExecutionScroll.getTime()+a.timeWindow<=(new Date).getTime()?(a.lastExecutionScroll=new Date,b.apply(this,arguments)):void 0}()}},onResize:function(){var a=this,b=function(){a.setConfig(),a.onScroll()};return{bind:function(){return a.lastExecutionResize.getTime()+a.timeWindow<=(new Date).getTime()?(a.lastExecutionResize=new Date,a.lastExecutionScroll=!1,b.apply(this,arguments)):void 0}()}}},a[b]}(window),a.fn[b]=function(c){return this.each(function(){if(a(this).data(b)){var d=a(this).data(b);switch(c){case"initDock":d.initDock();break;case"stopDock":d.stopDock();break;default:"object"==typeof c&&d.initDock()}}else a(this).data(b,new a[b](this,c))})}}(window.Zepto||window.jQuery);